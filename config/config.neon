extensions:
	slimApi: BrandEmbassy\Slim\DI\SlimApiExtension
	env: wodCZ\NetteDotenv\DotEnvExtension

slimApi:
	apiDefinitionKey: api
	slimConfiguration:
		settings:
			removeDefaultHandlers: true

services:
	- Entrydo\PipedriveLeadGenerator\ErrorHandler\ApiErrorHandler
	- Entrydo\PipedriveLeadGenerator\Lead\GenerateLeadAction

parameters:
	pipedrive:
		apiKey: @env::get(PIPEDRIVE_API_KEY)

	api:
		handlers:
			error: Entrydo\PipedriveLeadGenerator\ErrorHandler\ApiErrorHandler

		routes:
			"api":
				"1.0":
					'/lead':
						post:
							service: Entrydo\PipedriveLeadGenerator\Lead\GenerateLeadAction
